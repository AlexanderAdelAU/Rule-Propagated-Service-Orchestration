INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: About to check inputCollection.isEmpty() - size: 1
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: inputCollection contents: [null]
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: nodeType: EdgeNode
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: needsInputSynchronization: false
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Past inputCollection check, about to enter JOIN processing
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: inputCollection.get(0): null
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Zero-input service RadiologyService:processImagingRequest executing with trigger token (no workflow data required)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Processing EdgeNode for RadiologyService.processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.TransitionHandler - ORCHESTRATOR: Processing EdgeNode/MergeNode for RadiologyService.processImagingRequest
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Checking canonical binding for RadiologyService.processImagingRequest with attribute 'triageResults'
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Operation processImagingRequest uses standard (AND) semantics
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest requires 1 inputs total (standard AND logic)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest needs 1 input - can call immediately with 'triageResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Found single-input canonical binding - calling RadiologyService.processImagingRequest immediately
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Invoking RadiologyService.processImagingRequest via ServiceHelper (canonical binding)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - === SERVICE INVOCATION START ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Service: org.btsn.places.RadiologyService.processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SequenceID: 1040000
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Input arguments count: 1
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Processing argument 1/1, raw length: 1875
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Unwrapped place response from key: TRIAGE_PLACE_1040000
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Found existing original_token to preserve
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Extracted workflow_start_time=1770257247644
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Cleaned argument 1, length: 1875 (removed 0 bytes of metadata)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Extracted 1 clean business data arguments (removed infrastructure metadata)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SERVICE INVOKE: Calling org.btsn.places.RadiologyService.processImagingRequest with 1 CLEAN business data arguments
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Reflecting on org.btsn.places.RadiologyService.processImagingRequest
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Looking for method with 1 String parameters
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Created instance using 1-param constructor (context) for org.btsn.places.RadiologyService
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Found standard method (1 String args)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Calling processImagingRequest with 1 arguments
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SERVICE COMPLETE: org.btsn.places.RadiologyService.processImagingRequest completed in 241ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Using wrapped response key 'RAD_PLACE_1040000' instead of 'radiologyResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Successfully enriched service result with metadata
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - === SERVICE INVOCATION COMPLETE ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.TransitionHandler - ORCHESTRATOR: Service returned: {"RAD_PLACE_1040000":{"serviceType":"radiologyResults","notAfter":1770257367644,"tokenId":"1040000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":"{\"oxygen_saturation\":\"94%\",\"temperature\":\"98.6°F\",\"heart_rate\":\"110\",\"blood_pressure\":\"145\\\/95\"}","patientId":"P_Triage_1040000","triage_priority":"URGENT","diagnostic_orders":"[\"ECG_STAT\",\"Cardiac_Enzymes\",\"Chest_X-Ray\"]","findings":"Normal cardiac silhouette, clear lung fields bilaterally","routing_decision":"{\"estimated_time_to_treatment\":\"30-60 minutes\",\"routing_timestamp\":\"2026-02-05 12:07:33\",\"bypass_diagnostics\":\"false\",\"routing_path\":\"STANDARD_WORKFLOW\",\"rationale\":\"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology.\"}","protocol_id":"CHEST_XR_01","study_id":"STUDY_P_Triage_1040000_20260205120736_6893","priority":"STANDARD","radiologist":"DR_RAD_0","recommendations":"Clinical correlation recommended","pain_score":"7\/10","condition":"chest pain","next_services":"[\"LaboratoryService\",\"CardiologyService\",\"RadiologyService\",\"DiagnosisService\",\"TreatmentService\"]","providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","imaging_type":"chest_xray","impression":"No acute cardiopulmonary abnormalities","department":"EMERGENCY"},"workflow_start_time":1770257247644,"placeId":"RAD_PLACE_1040000","service_start_time":1770257255809,"version":"v001","sequenceId":"1040000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":241,"original_token":"{\"notAfter\":1770257367644,\"tokenId\":\"1040000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1040000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257247644,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257256050,"status":"IMAGING_COMPLETE"}}
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1040003 exiting place: RadiologyService -> DiagnosisService [arc=$ANON11]
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_out_RadiologyService token=1040003 eventType=EXIT
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_out_RadiologyService (EdgeNode) token=1040003 RadiologyService -> DiagnosisService [EXIT] arc=$ANON11
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1040003 EXIT from RadiologyService -> DiagnosisService.processClinicalDecision [arc=$ANON11]
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Querying activeService for DiagnosisService.processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService query returned 2 rows
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService result - ?channelId = ip0
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService result - ?port = 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: APPLYING activeService override - Channel: ip0, Port: 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Resolved ip0 to IP 192.168.1.152
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ROUTING: External to DiagnosisService -> 'radiologyResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ROUTING: Token 1040003 -> 'radiologyResults' to DiagnosisService.processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Publishing to Service DiagnosisService Operation: processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Channel: 192.168.1.152, Port: 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Attribute radiologyResults = {"RAD_PLACE_1040000":{"serviceType":"radiologyResults","notAfter":1770257367644,"tokenId":"1040000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":"{\"oxygen_saturation\":\"94%\",\"temperature\":\"98.6°F\",\"heart_rate\":\"110\",\"blood_pressure\":\"145\\\/95\"}","patientId":"P_Triage_1040000","triage_priority":"URGENT","diagnostic_orders":"[\"ECG_STAT\",\"Cardiac_Enzymes\",\"Chest_X-Ray\"]","findings":"Normal cardiac silhouette, clear lung fields bilaterally","routing_decision":"{\"estimated_time_to_treatment\":\"30-60 minutes\",\"routing_timestamp\":\"2026-02-05 12:07:33\",\"bypass_diagnostics\":\"false\",\"routing_path\":\"STANDARD_WORKFLOW\",\"rationale\":\"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology.\"}","protocol_id":"CHEST_XR_01","study_id":"STUDY_P_Triage_1040000_20260205120736_6893","priority":"STANDARD","radiologist":"DR_RAD_0","recommendations":"Clinical correlation recommended","pain_score":"7\/10","condition":"chest pain","next_services":"[\"LaboratoryService\",\"CardiologyService\",\"RadiologyService\",\"DiagnosisService\",\"TreatmentService\"]","providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","imaging_type":"chest_xray","impression":"No acute cardiopulmonary abnormalities","department":"EMERGENCY"},"workflow_start_time":1770257247644,"placeId":"RAD_PLACE_1040000","service_start_time":1770257255809,"version":"v001","sequenceId":"1040000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":241,"original_token":"{\"notAfter\":1770257367644,\"tokenId\":\"1040000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1040000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257247644,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257256050,"status":"IMAGING_COMPLETE"}}
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Completed callNextOperation for DiagnosisService, published=true
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Successfully published to DiagnosisService via EventPublisher
ERROR ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - monitorIncomingEvents: true
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - TIMING: EventReactor arrival time not found, using ServiceThread dequeue time=1770257254152 for seqID=1040003
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - WRITE: Using captured workflowStartTime=1770257247644 for seqID=1040003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - === SERVICE TIMING RECORD ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Sequence ID: 1040003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Service: RadiologyService
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Operation: processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Arrival Time (EventReactor): 1770257254152
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Invocation Time: 1770257255251
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Publish Time: 1770257256677
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Workflow Start Time: 1770257247644
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   MARKING: Buffer=0, Total=1, Capacity=50
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ==============================
INFO ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote service timing record for sequenceID: 1040003
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Queue Time (including priority queue): 1099ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Service Time: 1426ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Total Time: 2525ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Buffer Utilization: 0.0%
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Cleaned up join 1040000
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Service RadiologyService sequence ID: 1040000 complete.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Processing:: triageResults = {"TRIAGE_PLACE_1050000":{"serviceType":"triageResults","notAfter":1770257368842,"tokenId":"1050000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":{"oxygen_saturation":"94%","temperature":"98.6°F","heart_rate":"110","blood_pressure":"145\/95"},"patientId":"P_Triage_1050000","triage_priority":"URGENT","diagnostic_orders":["ECG_STAT","Cardiac_Enzymes","Chest_X-Ray"],"routing_decision":{"estimated_time_to_treatment":"30-60 minutes","routing_timestamp":"2026-02-05 12:07:35","bypass_diagnostics":"false","routing_path":"STANDARD_WORKFLOW","rationale":"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology."},"protocol_id":"TRIAGE_PROTOCOL_CHESTPAIN","priority":"STANDARD","pain_score":"7\/10","condition":"chest pain","next_services":["LaboratoryService","CardiologyService","RadiologyService","DiagnosisService","TreatmentService"],"providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","department":"EMERGENCY"},"workflow_start_time":1770257248842,"placeId":"TRIAGE_PLACE_1050000","routing_decision":{"guard_result":false,"bypass_diagnostics":false,"routing_path":"STANDARD_WORKFLOW","rationale":"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology."},"service_start_time":1770257255335,"version":"v001","sequenceId":"1050000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":422,"original_token":"{\"notAfter\":1770257368842,\"tokenId\":\"1050000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1050000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257248842,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257255757,"status":"TRIAGE_COMPLETE"}}
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CAPTURE: WorkflowStartTime=1770257248849 for seqID=1050003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - Incoming Sequence ID = 1050003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - MonitorIncomingEvents+ = true
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - Using RuleBaseVersion: v001
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - FILTER: Event for RadiologyService.processImagingRequest accepted by RadiologyService thread
WARN ServiceThread-RadiologyService-12101 org.btsn.json.jsonLibrary - Key "triageResults" already exists. Skipping.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - JOIN-MAP: Added key=triageResults to join 1050000 (tokenId=1050003, mapSize=1)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Loading rule base for operation: processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Rule base location: C:\DevShare\BTSN_R001\BTSN\btsn.healthcare.places.Radiology/RuleFolder.v001/processImagingRequest/Service.ruleml
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Using cached knowledge base for version: v001
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Parsing knowledge base...
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Knowledge base parsed successfully
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Checking canonical binding for RadiologyService.processImagingRequest with attribute 'triageResults'
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Operation processImagingRequest uses standard (AND) semantics
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest requires 1 inputs total (standard AND logic)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest needs 1 input - can call immediately with 'triageResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Canonical binding found - overriding serviceName facts
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Overrode inputCollection for canonical binding
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - decisionValueCollection already populated from publishes query - skipping legacy getDecisionValue
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1050003 buffered at T_in_RadiologyService (buffer=0)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Could not extract previousPlace from payload
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_in_RadiologyService token=1050003 eventType=BUFFERED
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_in_RadiologyService (EdgeNode) token=1050003  -> RadiologyService [BUFFERED] buffer=0
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1050003 BUFFERED at RadiologyService (T_in arrival)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1050003 entering place: RadiologyService (buffer=0)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Could not extract previousPlace from payload
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_in_RadiologyService token=1050003 eventType=ENTER
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_in_RadiologyService (EdgeNode) token=1050003  -> RadiologyService [ENTER] buffer=0
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1050003 ENTER at RadiologyService
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: About to check inputCollection.isEmpty() - size: 1
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: inputCollection contents: [null]
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: nodeType: EdgeNode
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: needsInputSynchronization: false
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Past inputCollection check, about to enter JOIN processing
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: inputCollection.get(0): null
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Zero-input service RadiologyService:processImagingRequest executing with trigger token (no workflow data required)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Processing EdgeNode for RadiologyService.processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.TransitionHandler - ORCHESTRATOR: Processing EdgeNode/MergeNode for RadiologyService.processImagingRequest
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Checking canonical binding for RadiologyService.processImagingRequest with attribute 'triageResults'
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Operation processImagingRequest uses standard (AND) semantics
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest requires 1 inputs total (standard AND logic)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest needs 1 input - can call immediately with 'triageResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Found single-input canonical binding - calling RadiologyService.processImagingRequest immediately
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Invoking RadiologyService.processImagingRequest via ServiceHelper (canonical binding)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - === SERVICE INVOCATION START ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Service: org.btsn.places.RadiologyService.processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SequenceID: 1050000
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Input arguments count: 1
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Processing argument 1/1, raw length: 1875
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Unwrapped place response from key: TRIAGE_PLACE_1050000
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Found existing original_token to preserve
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Extracted workflow_start_time=1770257248842
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Cleaned argument 1, length: 1875 (removed 0 bytes of metadata)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Extracted 1 clean business data arguments (removed infrastructure metadata)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SERVICE INVOKE: Calling org.btsn.places.RadiologyService.processImagingRequest with 1 CLEAN business data arguments
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Reflecting on org.btsn.places.RadiologyService.processImagingRequest
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Looking for method with 1 String parameters
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Created instance using 1-param constructor (context) for org.btsn.places.RadiologyService
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Found standard method (1 String args)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Calling processImagingRequest with 1 arguments
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SERVICE COMPLETE: org.btsn.places.RadiologyService.processImagingRequest completed in 257ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Using wrapped response key 'RAD_PLACE_1050000' instead of 'radiologyResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Successfully enriched service result with metadata
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - === SERVICE INVOCATION COMPLETE ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.TransitionHandler - ORCHESTRATOR: Service returned: {"RAD_PLACE_1050000":{"serviceType":"radiologyResults","notAfter":1770257368842,"tokenId":"1050000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":"{\"oxygen_saturation\":\"94%\",\"temperature\":\"98.6°F\",\"heart_rate\":\"110\",\"blood_pressure\":\"145\\\/95\"}","patientId":"P_Triage_1050000","triage_priority":"URGENT","diagnostic_orders":"[\"ECG_STAT\",\"Cardiac_Enzymes\",\"Chest_X-Ray\"]","findings":"Normal cardiac silhouette, clear lung fields bilaterally","routing_decision":"{\"estimated_time_to_treatment\":\"30-60 minutes\",\"routing_timestamp\":\"2026-02-05 12:07:35\",\"bypass_diagnostics\":\"false\",\"routing_path\":\"STANDARD_WORKFLOW\",\"rationale\":\"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology.\"}","protocol_id":"CHEST_XR_01","study_id":"STUDY_P_Triage_1050000_20260205120739_3898","priority":"STANDARD","radiologist":"DR_RAD_0","recommendations":"Clinical correlation recommended","pain_score":"7\/10","condition":"chest pain","next_services":"[\"LaboratoryService\",\"CardiologyService\",\"RadiologyService\",\"DiagnosisService\",\"TreatmentService\"]","providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","imaging_type":"chest_xray","impression":"No acute cardiopulmonary abnormalities","department":"EMERGENCY"},"workflow_start_time":1770257248842,"placeId":"RAD_PLACE_1050000","service_start_time":1770257259373,"version":"v001","sequenceId":"1050000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":257,"original_token":"{\"notAfter\":1770257368842,\"tokenId\":\"1050000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1050000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257248842,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257259630,"status":"IMAGING_COMPLETE"}}
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1050003 exiting place: RadiologyService -> DiagnosisService [arc=$ANON11]
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_out_RadiologyService token=1050003 eventType=EXIT
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_out_RadiologyService (EdgeNode) token=1050003 RadiologyService -> DiagnosisService [EXIT] arc=$ANON11
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1050003 EXIT from RadiologyService -> DiagnosisService.processClinicalDecision [arc=$ANON11]
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Querying activeService for DiagnosisService.processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService query returned 2 rows
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService result - ?channelId = ip0
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService result - ?port = 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: APPLYING activeService override - Channel: ip0, Port: 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Resolved ip0 to IP 192.168.1.152
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ROUTING: External to DiagnosisService -> 'radiologyResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ROUTING: Token 1050003 -> 'radiologyResults' to DiagnosisService.processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Publishing to Service DiagnosisService Operation: processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Channel: 192.168.1.152, Port: 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Attribute radiologyResults = {"RAD_PLACE_1050000":{"serviceType":"radiologyResults","notAfter":1770257368842,"tokenId":"1050000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":"{\"oxygen_saturation\":\"94%\",\"temperature\":\"98.6°F\",\"heart_rate\":\"110\",\"blood_pressure\":\"145\\\/95\"}","patientId":"P_Triage_1050000","triage_priority":"URGENT","diagnostic_orders":"[\"ECG_STAT\",\"Cardiac_Enzymes\",\"Chest_X-Ray\"]","findings":"Normal cardiac silhouette, clear lung fields bilaterally","routing_decision":"{\"estimated_time_to_treatment\":\"30-60 minutes\",\"routing_timestamp\":\"2026-02-05 12:07:35\",\"bypass_diagnostics\":\"false\",\"routing_path\":\"STANDARD_WORKFLOW\",\"rationale\":\"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology.\"}","protocol_id":"CHEST_XR_01","study_id":"STUDY_P_Triage_1050000_20260205120739_3898","priority":"STANDARD","radiologist":"DR_RAD_0","recommendations":"Clinical correlation recommended","pain_score":"7\/10","condition":"chest pain","next_services":"[\"LaboratoryService\",\"CardiologyService\",\"RadiologyService\",\"DiagnosisService\",\"TreatmentService\"]","providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","imaging_type":"chest_xray","impression":"No acute cardiopulmonary abnormalities","department":"EMERGENCY"},"workflow_start_time":1770257248842,"placeId":"RAD_PLACE_1050000","service_start_time":1770257259373,"version":"v001","sequenceId":"1050000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":257,"original_token":"{\"notAfter\":1770257368842,\"tokenId\":\"1050000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1050000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257248842,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257259630,"status":"IMAGING_COMPLETE"}}
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Completed callNextOperation for DiagnosisService, published=true
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Successfully published to DiagnosisService via EventPublisher
ERROR ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - monitorIncomingEvents: true
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - TIMING: EventReactor arrival time not found, using ServiceThread dequeue time=1770257257753 for seqID=1050003
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - WRITE: Using captured workflowStartTime=1770257248849 for seqID=1050003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - === SERVICE TIMING RECORD ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Sequence ID: 1050003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Service: RadiologyService
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Operation: processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Arrival Time (EventReactor): 1770257257753
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Invocation Time: 1770257259201
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Publish Time: 1770257259850
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Workflow Start Time: 1770257248849
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   MARKING: Buffer=0, Total=1, Capacity=50
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ==============================
INFO ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote service timing record for sequenceID: 1050003
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Queue Time (including priority queue): 1448ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Service Time: 649ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Total Time: 2097ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Buffer Utilization: 0.0%
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Cleaned up join 1050000
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Service RadiologyService sequence ID: 1050000 complete.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Processing:: triageResults = {"TRIAGE_PLACE_1060000":{"serviceType":"triageResults","notAfter":1770257370628,"tokenId":"1060000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":{"oxygen_saturation":"94%","temperature":"98.6°F","heart_rate":"110","blood_pressure":"145\/95"},"patientId":"P_Triage_1060000","triage_priority":"URGENT","diagnostic_orders":["ECG_STAT","Cardiac_Enzymes","Chest_X-Ray"],"routing_decision":{"estimated_time_to_treatment":"30-60 minutes","routing_timestamp":"2026-02-05 12:07:39","bypass_diagnostics":"false","routing_path":"STANDARD_WORKFLOW","rationale":"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology."},"protocol_id":"TRIAGE_PROTOCOL_CHESTPAIN","priority":"STANDARD","pain_score":"9\/10","condition":"chest pain","next_services":["LaboratoryService","CardiologyService","RadiologyService","DiagnosisService","TreatmentService"],"providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","department":"EMERGENCY"},"workflow_start_time":1770257250628,"placeId":"TRIAGE_PLACE_1060000","routing_decision":{"guard_result":false,"bypass_diagnostics":false,"routing_path":"STANDARD_WORKFLOW","rationale":"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology."},"service_start_time":1770257259631,"version":"v001","sequenceId":"1060000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":265,"original_token":"{\"notAfter\":1770257370628,\"tokenId\":\"1060000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1060000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257250628,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257259896,"status":"TRIAGE_COMPLETE"}}
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CAPTURE: WorkflowStartTime=1770257250628 for seqID=1060003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - Incoming Sequence ID = 1060003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - MonitorIncomingEvents+ = true
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - Using RuleBaseVersion: v001
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - FILTER: Event for RadiologyService.processImagingRequest accepted by RadiologyService thread
WARN ServiceThread-RadiologyService-12101 org.btsn.json.jsonLibrary - Key "triageResults" already exists. Skipping.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - JOIN-MAP: Added key=triageResults to join 1060000 (tokenId=1060003, mapSize=1)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Loading rule base for operation: processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Rule base location: C:\DevShare\BTSN_R001\BTSN\btsn.healthcare.places.Radiology/RuleFolder.v001/processImagingRequest/Service.ruleml
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Using cached knowledge base for version: v001
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Parsing knowledge base...
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Knowledge base parsed successfully
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Checking canonical binding for RadiologyService.processImagingRequest with attribute 'triageResults'
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Operation processImagingRequest uses standard (AND) semantics
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest requires 1 inputs total (standard AND logic)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest needs 1 input - can call immediately with 'triageResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Canonical binding found - overriding serviceName facts
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Overrode inputCollection for canonical binding
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - decisionValueCollection already populated from publishes query - skipping legacy getDecisionValue
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1060003 buffered at T_in_RadiologyService (buffer=0)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Could not extract previousPlace from payload
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_in_RadiologyService token=1060003 eventType=BUFFERED
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_in_RadiologyService (EdgeNode) token=1060003  -> RadiologyService [BUFFERED] buffer=0
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1060003 BUFFERED at RadiologyService (T_in arrival)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1060003 entering place: RadiologyService (buffer=0)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Could not extract previousPlace from payload
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_in_RadiologyService token=1060003 eventType=ENTER
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_in_RadiologyService (EdgeNode) token=1060003  -> RadiologyService [ENTER] buffer=0
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1060003 ENTER at RadiologyService
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: About to check inputCollection.isEmpty() - size: 1
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: inputCollection contents: [null]
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: nodeType: EdgeNode
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: needsInputSynchronization: false
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Past inputCollection check, about to enter JOIN processing
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: inputCollection.get(0): null
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Zero-input service RadiologyService:processImagingRequest executing with trigger token (no workflow data required)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Processing EdgeNode for RadiologyService.processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.TransitionHandler - ORCHESTRATOR: Processing EdgeNode/MergeNode for RadiologyService.processImagingRequest
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Checking canonical binding for RadiologyService.processImagingRequest with attribute 'triageResults'
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Operation processImagingRequest uses standard (AND) semantics
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest requires 1 inputs total (standard AND logic)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest needs 1 input - can call immediately with 'triageResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Found single-input canonical binding - calling RadiologyService.processImagingRequest immediately
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Invoking RadiologyService.processImagingRequest via ServiceHelper (canonical binding)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - === SERVICE INVOCATION START ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Service: org.btsn.places.RadiologyService.processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SequenceID: 1060000
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Input arguments count: 1
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Processing argument 1/1, raw length: 1875
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Unwrapped place response from key: TRIAGE_PLACE_1060000
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Found existing original_token to preserve
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Extracted workflow_start_time=1770257250628
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Cleaned argument 1, length: 1875 (removed 0 bytes of metadata)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Extracted 1 clean business data arguments (removed infrastructure metadata)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SERVICE INVOKE: Calling org.btsn.places.RadiologyService.processImagingRequest with 1 CLEAN business data arguments
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Reflecting on org.btsn.places.RadiologyService.processImagingRequest
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Looking for method with 1 String parameters
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Created instance using 1-param constructor (context) for org.btsn.places.RadiologyService
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Found standard method (1 String args)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Calling processImagingRequest with 1 arguments
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SERVICE COMPLETE: org.btsn.places.RadiologyService.processImagingRequest completed in 790ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Using wrapped response key 'RAD_PLACE_1060000' instead of 'radiologyResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Successfully enriched service result with metadata
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - === SERVICE INVOCATION COMPLETE ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.TransitionHandler - ORCHESTRATOR: Service returned: {"RAD_PLACE_1060000":{"serviceType":"radiologyResults","notAfter":1770257370628,"tokenId":"1060000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":"{\"oxygen_saturation\":\"94%\",\"temperature\":\"98.6°F\",\"heart_rate\":\"110\",\"blood_pressure\":\"145\\\/95\"}","patientId":"P_Triage_1060000","triage_priority":"URGENT","diagnostic_orders":"[\"ECG_STAT\",\"Cardiac_Enzymes\",\"Chest_X-Ray\"]","findings":"Normal cardiac silhouette, clear lung fields bilaterally","routing_decision":"{\"estimated_time_to_treatment\":\"30-60 minutes\",\"routing_timestamp\":\"2026-02-05 12:07:39\",\"bypass_diagnostics\":\"false\",\"routing_path\":\"STANDARD_WORKFLOW\",\"rationale\":\"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology.\"}","protocol_id":"CHEST_XR_01","study_id":"STUDY_P_Triage_1060000_20260205120743_6123","priority":"STANDARD","radiologist":"DR_RAD_0","recommendations":"Clinical correlation recommended","pain_score":"9\/10","condition":"chest pain","next_services":"[\"LaboratoryService\",\"CardiologyService\",\"RadiologyService\",\"DiagnosisService\",\"TreatmentService\"]","providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","imaging_type":"chest_xray","impression":"No acute cardiopulmonary abnormalities","department":"EMERGENCY"},"workflow_start_time":1770257250628,"placeId":"RAD_PLACE_1060000","service_start_time":1770257262329,"version":"v001","sequenceId":"1060000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":790,"original_token":"{\"notAfter\":1770257370628,\"tokenId\":\"1060000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1060000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257250628,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257263119,"status":"IMAGING_COMPLETE"}}
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1060003 exiting place: RadiologyService -> DiagnosisService [arc=$ANON11]
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_out_RadiologyService token=1060003 eventType=EXIT
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_out_RadiologyService (EdgeNode) token=1060003 RadiologyService -> DiagnosisService [EXIT] arc=$ANON11
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1060003 EXIT from RadiologyService -> DiagnosisService.processClinicalDecision [arc=$ANON11]
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Querying activeService for DiagnosisService.processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService query returned 2 rows
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService result - ?channelId = ip0
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService result - ?port = 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: APPLYING activeService override - Channel: ip0, Port: 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Resolved ip0 to IP 192.168.1.152
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ROUTING: External to DiagnosisService -> 'radiologyResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ROUTING: Token 1060003 -> 'radiologyResults' to DiagnosisService.processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Publishing to Service DiagnosisService Operation: processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Channel: 192.168.1.152, Port: 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Attribute radiologyResults = {"RAD_PLACE_1060000":{"serviceType":"radiologyResults","notAfter":1770257370628,"tokenId":"1060000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":"{\"oxygen_saturation\":\"94%\",\"temperature\":\"98.6°F\",\"heart_rate\":\"110\",\"blood_pressure\":\"145\\\/95\"}","patientId":"P_Triage_1060000","triage_priority":"URGENT","diagnostic_orders":"[\"ECG_STAT\",\"Cardiac_Enzymes\",\"Chest_X-Ray\"]","findings":"Normal cardiac silhouette, clear lung fields bilaterally","routing_decision":"{\"estimated_time_to_treatment\":\"30-60 minutes\",\"routing_timestamp\":\"2026-02-05 12:07:39\",\"bypass_diagnostics\":\"false\",\"routing_path\":\"STANDARD_WORKFLOW\",\"rationale\":\"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology.\"}","protocol_id":"CHEST_XR_01","study_id":"STUDY_P_Triage_1060000_20260205120743_6123","priority":"STANDARD","radiologist":"DR_RAD_0","recommendations":"Clinical correlation recommended","pain_score":"9\/10","condition":"chest pain","next_services":"[\"LaboratoryService\",\"CardiologyService\",\"RadiologyService\",\"DiagnosisService\",\"TreatmentService\"]","providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","imaging_type":"chest_xray","impression":"No acute cardiopulmonary abnormalities","department":"EMERGENCY"},"workflow_start_time":1770257250628,"placeId":"RAD_PLACE_1060000","service_start_time":1770257262329,"version":"v001","sequenceId":"1060000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":790,"original_token":"{\"notAfter\":1770257370628,\"tokenId\":\"1060000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1060000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257250628,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257263119,"status":"IMAGING_COMPLETE"}}
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Completed callNextOperation for DiagnosisService, published=true
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Successfully published to DiagnosisService via EventPublisher
ERROR ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - monitorIncomingEvents: true
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - TIMING: EventReactor arrival time not found, using ServiceThread dequeue time=1770257260971 for seqID=1060003
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - WRITE: Using captured workflowStartTime=1770257250628 for seqID=1060003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - === SERVICE TIMING RECORD ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Sequence ID: 1060003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Service: RadiologyService
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Operation: processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Arrival Time (EventReactor): 1770257260971
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Invocation Time: 1770257262178
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Publish Time: 1770257263394
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Workflow Start Time: 1770257250628
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   MARKING: Buffer=0, Total=1, Capacity=50
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ==============================
INFO ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote service timing record for sequenceID: 1060003
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Queue Time (including priority queue): 1207ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Service Time: 1216ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Total Time: 2423ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Buffer Utilization: 0.0%
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Cleaned up join 1060000
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Service RadiologyService sequence ID: 1060000 complete.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Processing:: triageResults = {"TRIAGE_PLACE_1070000":{"serviceType":"triageResults","notAfter":1770257372251,"tokenId":"1070000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":{"oxygen_saturation":"94%","temperature":"98.6°F","heart_rate":"110","blood_pressure":"145\/95"},"patientId":"P_Triage_1070000","triage_priority":"URGENT","diagnostic_orders":["ECG_STAT","Cardiac_Enzymes","Chest_X-Ray"],"routing_decision":{"estimated_time_to_treatment":"30-60 minutes","routing_timestamp":"2026-02-05 12:07:43","bypass_diagnostics":"false","routing_path":"STANDARD_WORKFLOW","rationale":"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology."},"protocol_id":"TRIAGE_PROTOCOL_CHESTPAIN","priority":"STANDARD","pain_score":"9\/10","condition":"chest pain","next_services":["LaboratoryService","CardiologyService","RadiologyService","DiagnosisService","TreatmentService"],"providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","department":"EMERGENCY"},"workflow_start_time":1770257252251,"placeId":"TRIAGE_PLACE_1070000","routing_decision":{"guard_result":false,"bypass_diagnostics":false,"routing_path":"STANDARD_WORKFLOW","rationale":"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology."},"service_start_time":1770257262604,"version":"v001","sequenceId":"1070000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":399,"original_token":"{\"notAfter\":1770257372251,\"tokenId\":\"1070000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1070000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257252251,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257263003,"status":"TRIAGE_COMPLETE"}}
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CAPTURE: WorkflowStartTime=1770257252251 for seqID=1070003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - Incoming Sequence ID = 1070003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - MonitorIncomingEvents+ = true
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - Using RuleBaseVersion: v001
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - FILTER: Event for RadiologyService.processImagingRequest accepted by RadiologyService thread
WARN ServiceThread-RadiologyService-12101 org.btsn.json.jsonLibrary - Key "triageResults" already exists. Skipping.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - JOIN-MAP: Added key=triageResults to join 1070000 (tokenId=1070003, mapSize=1)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Loading rule base for operation: processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Rule base location: C:\DevShare\BTSN_R001\BTSN\btsn.healthcare.places.Radiology/RuleFolder.v001/processImagingRequest/Service.ruleml
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Using cached knowledge base for version: v001
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Parsing knowledge base...
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Knowledge base parsed successfully
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Checking canonical binding for RadiologyService.processImagingRequest with attribute 'triageResults'
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Operation processImagingRequest uses standard (AND) semantics
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest requires 1 inputs total (standard AND logic)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest needs 1 input - can call immediately with 'triageResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Canonical binding found - overriding serviceName facts
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Overrode inputCollection for canonical binding
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - decisionValueCollection already populated from publishes query - skipping legacy getDecisionValue
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1070003 buffered at T_in_RadiologyService (buffer=0)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Could not extract previousPlace from payload
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_in_RadiologyService token=1070003 eventType=BUFFERED
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_in_RadiologyService (EdgeNode) token=1070003  -> RadiologyService [BUFFERED] buffer=0
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1070003 BUFFERED at RadiologyService (T_in arrival)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1070003 entering place: RadiologyService (buffer=0)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Could not extract previousPlace from payload
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_in_RadiologyService token=1070003 eventType=ENTER
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_in_RadiologyService (EdgeNode) token=1070003  -> RadiologyService [ENTER] buffer=0
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1070003 ENTER at RadiologyService
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: About to check inputCollection.isEmpty() - size: 1
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: inputCollection contents: [null]
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: nodeType: EdgeNode
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: needsInputSynchronization: false
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Past inputCollection check, about to enter JOIN processing
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: inputCollection.get(0): null
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Zero-input service RadiologyService:processImagingRequest executing with trigger token (no workflow data required)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Processing EdgeNode for RadiologyService.processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.TransitionHandler - ORCHESTRATOR: Processing EdgeNode/MergeNode for RadiologyService.processImagingRequest
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Checking canonical binding for RadiologyService.processImagingRequest with attribute 'triageResults'
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Operation processImagingRequest uses standard (AND) semantics
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest requires 1 inputs total (standard AND logic)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest needs 1 input - can call immediately with 'triageResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Found single-input canonical binding - calling RadiologyService.processImagingRequest immediately
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Invoking RadiologyService.processImagingRequest via ServiceHelper (canonical binding)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - === SERVICE INVOCATION START ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Service: org.btsn.places.RadiologyService.processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SequenceID: 1070000
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Input arguments count: 1
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Processing argument 1/1, raw length: 1875
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Unwrapped place response from key: TRIAGE_PLACE_1070000
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Found existing original_token to preserve
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Extracted workflow_start_time=1770257252251
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Cleaned argument 1, length: 1875 (removed 0 bytes of metadata)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Extracted 1 clean business data arguments (removed infrastructure metadata)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SERVICE INVOKE: Calling org.btsn.places.RadiologyService.processImagingRequest with 1 CLEAN business data arguments
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Reflecting on org.btsn.places.RadiologyService.processImagingRequest
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Looking for method with 1 String parameters
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Created instance using 1-param constructor (context) for org.btsn.places.RadiologyService
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Found standard method (1 String args)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Calling processImagingRequest with 1 arguments
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SERVICE COMPLETE: org.btsn.places.RadiologyService.processImagingRequest completed in 1051ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Using wrapped response key 'RAD_PLACE_1070000' instead of 'radiologyResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Successfully enriched service result with metadata
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - === SERVICE INVOCATION COMPLETE ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.TransitionHandler - ORCHESTRATOR: Service returned: {"RAD_PLACE_1070000":{"serviceType":"radiologyResults","notAfter":1770257372251,"tokenId":"1070000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":"{\"oxygen_saturation\":\"94%\",\"temperature\":\"98.6°F\",\"heart_rate\":\"110\",\"blood_pressure\":\"145\\\/95\"}","patientId":"P_Triage_1070000","triage_priority":"URGENT","diagnostic_orders":"[\"ECG_STAT\",\"Cardiac_Enzymes\",\"Chest_X-Ray\"]","findings":"Normal cardiac silhouette, clear lung fields bilaterally","routing_decision":"{\"estimated_time_to_treatment\":\"30-60 minutes\",\"routing_timestamp\":\"2026-02-05 12:07:43\",\"bypass_diagnostics\":\"false\",\"routing_path\":\"STANDARD_WORKFLOW\",\"rationale\":\"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology.\"}","protocol_id":"CHEST_XR_01","study_id":"STUDY_P_Triage_1070000_20260205120747_6201","priority":"STANDARD","radiologist":"DR_RAD_0","recommendations":"Clinical correlation recommended","pain_score":"9\/10","condition":"chest pain","next_services":"[\"LaboratoryService\",\"CardiologyService\",\"RadiologyService\",\"DiagnosisService\",\"TreatmentService\"]","providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","imaging_type":"chest_xray","impression":"No acute cardiopulmonary abnormalities","department":"EMERGENCY"},"workflow_start_time":1770257252251,"placeId":"RAD_PLACE_1070000","service_start_time":1770257266354,"version":"v001","sequenceId":"1070000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":1051,"original_token":"{\"notAfter\":1770257372251,\"tokenId\":\"1070000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1070000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257252251,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257267405,"status":"IMAGING_COMPLETE"}}
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1070003 exiting place: RadiologyService -> DiagnosisService [arc=$ANON11]
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_out_RadiologyService token=1070003 eventType=EXIT
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_out_RadiologyService (EdgeNode) token=1070003 RadiologyService -> DiagnosisService [EXIT] arc=$ANON11
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1070003 EXIT from RadiologyService -> DiagnosisService.processClinicalDecision [arc=$ANON11]
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Querying activeService for DiagnosisService.processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService query returned 2 rows
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService result - ?channelId = ip0
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService result - ?port = 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: APPLYING activeService override - Channel: ip0, Port: 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Resolved ip0 to IP 192.168.1.152
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ROUTING: External to DiagnosisService -> 'radiologyResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ROUTING: Token 1070003 -> 'radiologyResults' to DiagnosisService.processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Publishing to Service DiagnosisService Operation: processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Channel: 192.168.1.152, Port: 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Attribute radiologyResults = {"RAD_PLACE_1070000":{"serviceType":"radiologyResults","notAfter":1770257372251,"tokenId":"1070000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":"{\"oxygen_saturation\":\"94%\",\"temperature\":\"98.6°F\",\"heart_rate\":\"110\",\"blood_pressure\":\"145\\\/95\"}","patientId":"P_Triage_1070000","triage_priority":"URGENT","diagnostic_orders":"[\"ECG_STAT\",\"Cardiac_Enzymes\",\"Chest_X-Ray\"]","findings":"Normal cardiac silhouette, clear lung fields bilaterally","routing_decision":"{\"estimated_time_to_treatment\":\"30-60 minutes\",\"routing_timestamp\":\"2026-02-05 12:07:43\",\"bypass_diagnostics\":\"false\",\"routing_path\":\"STANDARD_WORKFLOW\",\"rationale\":\"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology.\"}","protocol_id":"CHEST_XR_01","study_id":"STUDY_P_Triage_1070000_20260205120747_6201","priority":"STANDARD","radiologist":"DR_RAD_0","recommendations":"Clinical correlation recommended","pain_score":"9\/10","condition":"chest pain","next_services":"[\"LaboratoryService\",\"CardiologyService\",\"RadiologyService\",\"DiagnosisService\",\"TreatmentService\"]","providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","imaging_type":"chest_xray","impression":"No acute cardiopulmonary abnormalities","department":"EMERGENCY"},"workflow_start_time":1770257252251,"placeId":"RAD_PLACE_1070000","service_start_time":1770257266354,"version":"v001","sequenceId":"1070000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":1051,"original_token":"{\"notAfter\":1770257372251,\"tokenId\":\"1070000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1070000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257252251,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257267405,"status":"IMAGING_COMPLETE"}}
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Completed callNextOperation for DiagnosisService, published=true
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Successfully published to DiagnosisService via EventPublisher
ERROR ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - monitorIncomingEvents: true
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - TIMING: EventReactor arrival time not found, using ServiceThread dequeue time=1770257264564 for seqID=1070003
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - WRITE: Using captured workflowStartTime=1770257252251 for seqID=1070003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - === SERVICE TIMING RECORD ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Sequence ID: 1070003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Service: RadiologyService
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Operation: processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Arrival Time (EventReactor): 1770257264564
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Invocation Time: 1770257266109
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Publish Time: 1770257267763
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Workflow Start Time: 1770257252251
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   MARKING: Buffer=0, Total=1, Capacity=50
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ==============================
INFO ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote service timing record for sequenceID: 1070003
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Queue Time (including priority queue): 1545ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Service Time: 1654ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Total Time: 3199ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Buffer Utilization: 0.0%
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Cleaned up join 1070000
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Service RadiologyService sequence ID: 1070000 complete.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Processing:: triageResults = {"TRIAGE_PLACE_1080000":{"serviceType":"triageResults","notAfter":1770257374038,"tokenId":"1080000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":{"oxygen_saturation":"94%","temperature":"98.6°F","heart_rate":"110","blood_pressure":"145\/95"},"patientId":"P_Triage_1080000","triage_priority":"URGENT","diagnostic_orders":["ECG_STAT","Cardiac_Enzymes","Chest_X-Ray"],"routing_decision":{"estimated_time_to_treatment":"30-60 minutes","routing_timestamp":"2026-02-05 12:07:47","bypass_diagnostics":"false","routing_path":"STANDARD_WORKFLOW","rationale":"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology."},"protocol_id":"TRIAGE_PROTOCOL_CHESTPAIN","priority":"STANDARD","pain_score":"7\/10","condition":"chest pain","next_services":["LaboratoryService","CardiologyService","RadiologyService","DiagnosisService","TreatmentService"],"providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","department":"EMERGENCY"},"workflow_start_time":1770257254038,"placeId":"TRIAGE_PLACE_1080000","routing_decision":{"guard_result":false,"bypass_diagnostics":false,"routing_path":"STANDARD_WORKFLOW","rationale":"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology."},"service_start_time":1770257267371,"version":"v001","sequenceId":"1080000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":540,"original_token":"{\"notAfter\":1770257374038,\"tokenId\":\"1080000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1080000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257254038,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257267911,"status":"TRIAGE_COMPLETE"}}
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CAPTURE: WorkflowStartTime=1770257254038 for seqID=1080003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - Incoming Sequence ID = 1080003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - MonitorIncomingEvents+ = true
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - Using RuleBaseVersion: v001
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - FILTER: Event for RadiologyService.processImagingRequest accepted by RadiologyService thread
WARN ServiceThread-RadiologyService-12101 org.btsn.json.jsonLibrary - Key "triageResults" already exists. Skipping.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - JOIN-MAP: Added key=triageResults to join 1080000 (tokenId=1080003, mapSize=1)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Loading rule base for operation: processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Rule base location: C:\DevShare\BTSN_R001\BTSN\btsn.healthcare.places.Radiology/RuleFolder.v001/processImagingRequest/Service.ruleml
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Using cached knowledge base for version: v001
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Parsing knowledge base...
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Knowledge base parsed successfully
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Checking canonical binding for RadiologyService.processImagingRequest with attribute 'triageResults'
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Operation processImagingRequest uses standard (AND) semantics
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest requires 1 inputs total (standard AND logic)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest needs 1 input - can call immediately with 'triageResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Canonical binding found - overriding serviceName facts
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Overrode inputCollection for canonical binding
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - decisionValueCollection already populated from publishes query - skipping legacy getDecisionValue
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1080003 buffered at T_in_RadiologyService (buffer=0)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Could not extract previousPlace from payload
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_in_RadiologyService token=1080003 eventType=BUFFERED
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_in_RadiologyService (EdgeNode) token=1080003  -> RadiologyService [BUFFERED] buffer=0
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1080003 BUFFERED at RadiologyService (T_in arrival)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1080003 entering place: RadiologyService (buffer=0)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Could not extract previousPlace from payload
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_in_RadiologyService token=1080003 eventType=ENTER
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_in_RadiologyService (EdgeNode) token=1080003  -> RadiologyService [ENTER] buffer=0
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1080003 ENTER at RadiologyService
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: About to check inputCollection.isEmpty() - size: 1
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: inputCollection contents: [null]
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: nodeType: EdgeNode
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: needsInputSynchronization: false
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Past inputCollection check, about to enter JOIN processing
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: inputCollection.get(0): null
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Zero-input service RadiologyService:processImagingRequest executing with trigger token (no workflow data required)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Processing EdgeNode for RadiologyService.processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.TransitionHandler - ORCHESTRATOR: Processing EdgeNode/MergeNode for RadiologyService.processImagingRequest
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Checking canonical binding for RadiologyService.processImagingRequest with attribute 'triageResults'
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: Operation processImagingRequest uses standard (AND) semantics
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest requires 1 inputs total (standard AND logic)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CANONICAL-BINDING: processImagingRequest needs 1 input - can call immediately with 'triageResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Found single-input canonical binding - calling RadiologyService.processImagingRequest immediately
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Invoking RadiologyService.processImagingRequest via ServiceHelper (canonical binding)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - === SERVICE INVOCATION START ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Service: org.btsn.places.RadiologyService.processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SequenceID: 1080000
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Input arguments count: 1
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - Processing argument 1/1, raw length: 1875
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Unwrapped place response from key: TRIAGE_PLACE_1080000
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Found existing original_token to preserve
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Extracted workflow_start_time=1770257254038
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Cleaned argument 1, length: 1875 (removed 0 bytes of metadata)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Extracted 1 clean business data arguments (removed infrastructure metadata)
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SERVICE INVOKE: Calling org.btsn.places.RadiologyService.processImagingRequest with 1 CLEAN business data arguments
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Reflecting on org.btsn.places.RadiologyService.processImagingRequest
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Looking for method with 1 String parameters
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Created instance using 1-param constructor (context) for org.btsn.places.RadiologyService
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Found standard method (1 String args)
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - INVOKE: Calling processImagingRequest with 1 arguments
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - SERVICE COMPLETE: org.btsn.places.RadiologyService.processImagingRequest completed in 1396ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Using wrapped response key 'RAD_PLACE_1080000' instead of 'radiologyResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - ENRICHMENT: Successfully enriched service result with metadata
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceHelper - === SERVICE INVOCATION COMPLETE ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.TransitionHandler - ORCHESTRATOR: Service returned: {"RAD_PLACE_1080000":{"serviceType":"radiologyResults","notAfter":1770257374038,"tokenId":"1080000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":"{\"oxygen_saturation\":\"94%\",\"temperature\":\"98.6°F\",\"heart_rate\":\"110\",\"blood_pressure\":\"145\\\/95\"}","patientId":"P_Triage_1080000","triage_priority":"URGENT","diagnostic_orders":"[\"ECG_STAT\",\"Cardiac_Enzymes\",\"Chest_X-Ray\"]","findings":"Normal cardiac silhouette, clear lung fields bilaterally","routing_decision":"{\"estimated_time_to_treatment\":\"30-60 minutes\",\"routing_timestamp\":\"2026-02-05 12:07:47\",\"bypass_diagnostics\":\"false\",\"routing_path\":\"STANDARD_WORKFLOW\",\"rationale\":\"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology.\"}","protocol_id":"CHEST_XR_01","study_id":"STUDY_P_Triage_1080000_20260205120752_9185","priority":"STANDARD","radiologist":"DR_RAD_0","recommendations":"Clinical correlation recommended","pain_score":"7\/10","condition":"chest pain","next_services":"[\"LaboratoryService\",\"CardiologyService\",\"RadiologyService\",\"DiagnosisService\",\"TreatmentService\"]","providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","imaging_type":"chest_xray","impression":"No acute cardiopulmonary abnormalities","department":"EMERGENCY"},"workflow_start_time":1770257254038,"placeId":"RAD_PLACE_1080000","service_start_time":1770257270858,"version":"v001","sequenceId":"1080000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":1396,"original_token":"{\"notAfter\":1770257374038,\"tokenId\":\"1080000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1080000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257254038,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257272254,"status":"IMAGING_COMPLETE"}}
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Token 1080003 exiting place: RadiologyService -> DiagnosisService [arc=$ANON11]
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - NAMING CONVENTION VIOLATION: Service 'RadiologyService' does not end with '_Place'. Expected format: {NodeName}_Place. Transition IDs may not match topology. Please rename the service.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote transition firing: T_out_RadiologyService token=1080003 eventType=EXIT
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.PetriNetInstrumentationHelper - Recorded transition: T_out_RadiologyService (EdgeNode) token=1080003 RadiologyService -> DiagnosisService [EXIT] arc=$ANON11
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - PETRI-NET: Token 1080003 EXIT from RadiologyService -> DiagnosisService.processClinicalDecision [arc=$ANON11]
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: Querying activeService for DiagnosisService.processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService query returned 2 rows
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService result - ?channelId = ip0
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - DEBUG: ActiveService result - ?port = 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: APPLYING activeService override - Channel: ip0, Port: 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Resolved ip0 to IP 192.168.1.152
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ROUTING: External to DiagnosisService -> 'radiologyResults'
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ROUTING: Token 1080003 -> 'radiologyResults' to DiagnosisService.processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Publishing to Service DiagnosisService Operation: processClinicalDecision
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Channel: 192.168.1.152, Port: 2104
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Attribute radiologyResults = {"RAD_PLACE_1080000":{"serviceType":"radiologyResults","notAfter":1770257374038,"tokenId":"1080000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":"{\"oxygen_saturation\":\"94%\",\"temperature\":\"98.6°F\",\"heart_rate\":\"110\",\"blood_pressure\":\"145\\\/95\"}","patientId":"P_Triage_1080000","triage_priority":"URGENT","diagnostic_orders":"[\"ECG_STAT\",\"Cardiac_Enzymes\",\"Chest_X-Ray\"]","findings":"Normal cardiac silhouette, clear lung fields bilaterally","routing_decision":"{\"estimated_time_to_treatment\":\"30-60 minutes\",\"routing_timestamp\":\"2026-02-05 12:07:47\",\"bypass_diagnostics\":\"false\",\"routing_path\":\"STANDARD_WORKFLOW\",\"rationale\":\"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology.\"}","protocol_id":"CHEST_XR_01","study_id":"STUDY_P_Triage_1080000_20260205120752_9185","priority":"STANDARD","radiologist":"DR_RAD_0","recommendations":"Clinical correlation recommended","pain_score":"7\/10","condition":"chest pain","next_services":"[\"LaboratoryService\",\"CardiologyService\",\"RadiologyService\",\"DiagnosisService\",\"TreatmentService\"]","providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","imaging_type":"chest_xray","impression":"No acute cardiopulmonary abnormalities","department":"EMERGENCY"},"workflow_start_time":1770257254038,"placeId":"RAD_PLACE_1080000","service_start_time":1770257270858,"version":"v001","sequenceId":"1080000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":1396,"original_token":"{\"notAfter\":1770257374038,\"tokenId\":\"1080000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1080000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257254038,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257272254,"status":"IMAGING_COMPLETE"}}
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Completed callNextOperation for DiagnosisService, published=true
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Successfully published to DiagnosisService via EventPublisher
ERROR ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - monitorIncomingEvents: true
WARN ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - TIMING: EventReactor arrival time not found, using ServiceThread dequeue time=1770257268946 for seqID=1080003
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - WRITE: Using captured workflowStartTime=1770257254038 for seqID=1080003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - === SERVICE TIMING RECORD ===
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Sequence ID: 1080003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Service: RadiologyService
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Operation: processImagingRequest
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Arrival Time (EventReactor): 1770257268946
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Invocation Time: 1770257270625
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Publish Time: 1770257272899
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Workflow Start Time: 1770257254038
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   MARKING: Buffer=0, Total=1, Capacity=50
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ==============================
INFO ServiceThread-RadiologyService-12101 org.btsn.derby.Analysis.BuildServiceAnalysisDatabase - Wrote service timing record for sequenceID: 1080003
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Queue Time (including priority queue): 1679ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Service Time: 2274ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Total Time: 3953ms
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread -   Buffer Utilization: 0.0%
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Cleaned up join 1080000
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Service RadiologyService sequence ID: 1080000 complete.
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - ORCHESTRATOR: Processing:: triageResults = {"TRIAGE_PLACE_1090000":{"serviceType":"triageResults","notAfter":1770257376051,"tokenId":"1090000","data":{"triage_nurse":"RN_TRIAGE","vital_signs":{"oxygen_saturation":"94%","temperature":"98.6°F","heart_rate":"110","blood_pressure":"145\/95"},"patientId":"P_Triage_1090000","triage_priority":"URGENT","diagnostic_orders":["ECG_STAT","Cardiac_Enzymes","Chest_X-Ray"],"routing_decision":{"estimated_time_to_treatment":"30-60 minutes","routing_timestamp":"2026-02-05 12:07:51","bypass_diagnostics":"false","routing_path":"STANDARD_WORKFLOW","rationale":"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology."},"protocol_id":"TRIAGE_PROTOCOL_CHESTPAIN","priority":"STANDARD","pain_score":"8\/10","condition":"chest pain","next_services":["LaboratoryService","CardiologyService","RadiologyService","DiagnosisService","TreatmentService"],"providerId":"RN_TRIAGE_001","chief_complaint":"chest pain","department":"EMERGENCY"},"workflow_start_time":1770257256051,"placeId":"TRIAGE_PLACE_1090000","routing_decision":{"guard_result":false,"bypass_diagnostics":false,"routing_path":"STANDARD_WORKFLOW","rationale":"Chest pain requires diagnostic workup (ECG, cardiac enzymes, possible imaging) to differentiate cardiac from non-cardiac etiology."},"service_start_time":1770257270634,"version":"v001","sequenceId":"1090000","executionTime":0,"marking":0,"currentPlace":"TriageService","service_processing_time_ms":593,"original_token":"{\"notAfter\":1770257376051,\"tokenId\":\"1090000\",\"data\":{\"condition\":\"chest pain\",\"patientId\":\"P_Triage_1090000\",\"providerId\":\"RN_TRIAGE_001\",\"priority\":\"STANDARD\",\"department\":\"EMERGENCY\"},\"workflow_start_time\":1770257256051,\"currentPlace\":\"TriageService\",\"version\":\"v001\"}","service_end_time":1770257271227,"status":"TRIAGE_COMPLETE"}}
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - CAPTURE: WorkflowStartTime=1770257256053 for seqID=1090003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - Incoming Sequence ID = 1090003
INFO ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - MonitorIncomingEvents+ = true
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - Using RuleBaseVersion: v001
DEBUG ServiceThread-RadiologyService-12101 org.btsn.handlers.ServiceThread - FILTER: Event for RadiologyService.processImagingRequest accepted by RadiologyService thread
WARN ServiceThread-RadiologyService-12101 org.btsn.json.jsonLibrary - Key "triageResults" already exists. Skipping.
